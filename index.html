<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorldVibe</title>
    <link rel="stylesheet" href="styles.css">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
  <link rel="shortcut icon" href="assets/favicon.ico">
</head>
<body>      
  <header>
    <div class="logo">
        <a href="index.html" style="text-decoration:none;color:inherit;">
            WorldVibe<img src="assets/plane1.svg" alt="Plane" class="logo-icon"/></a>
        </div>
    <nav>
      <ul>
        <li><a href="#countries">Countries</a></li>
        <li><a href="#passport">Passport</a></li>
      </ul>
    </nav>
  </header>

  <!-- Landing -->
  <section id="landing" class="page hero">
    <h1>WorldVibe</h1>
    <p>Turning Worldwide wonder into Worldvibe energy.</p>
  </section>

  <!-- Globe -->
  <section id="globe" class="page">
    <div class="globe-container" id="globeContainer">
    <img id="globe" src="assets/globe.gif" alt="Globe" />
    </div>
  </section>

  <!-- Countries -->
  <section id="countries" class="page maps-section">
      <div class="countries-intro">
        <h2>Countries</h2>
        <p class="countries-tagline">Tap a Country, Let Curiosity Pack Your Bags and Learn Like a Traveler, Not a Textbook</p>
        <p class="countries-ps">P.S. rest of the countries are coming soon (dev is sprinting)</p>
      </div>

      <!-- USA Map -->
      <div class="map-card" style="top: 400px; left: 170px;">
        <a href="usa.html" title="Explore USA">
          <img class="map-usa" src="assets/usa map.svg" alt="USA Map" />
        </a>
      </div>

      <!-- France Map -->
      <div class="map-card" style="top: 280px; left: 460px;">
        <a href="france.html" title="Explore France">
          <img class="map-france" src="assets/france map.svg" alt="France Map" />
        </a>
      </div>

      <!-- Japan Map -->
      <div class="map-card" style="top: 280px; right: 400px;">
        <a href="japan.html" title="Explore Japan">
          <img class="map-japan" src="assets/japan map.svg" alt="Japan Map" />
        </a>
      </div>

      <!-- India Map -->
      <div class="map-card" style="top: 340px; right: 130px;">
        <a href="india.html" title="Explore India">
          <img class="map-india" src="assets/india map.svg" alt="India Map" />
        </a>
      </div>
    </section>

    <!-- Passport -->
    <section id="passport" class="page" style="padding:40px;">
      <div class="passport-content">
        <div class="passport-left">
          <img src="assets/passport.svg" alt="Passport" class="passport-image" />
          <div id="stampsContainer" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
            <!-- Stamps will be added here dynamically -->
          </div>
        </div>
        <div class="passport-right">
          <h2>Your Passport</h2>
          <p>Collect stamps from countries you explore.</p>
        </div>
      </div>
    </section>

    <footer>
        <p>&copy; 2025 WorldVibe. All rights reserved.</p>
    </footer>
</body>
<script src="script.js"></script>
<script>
  // Load stamps from localStorage when page loads, but only show them once after a redirect
  document.addEventListener('DOMContentLoaded', function() {
    const countries = ['france', 'usa', 'india', 'japan'];
    const stampsContainer = document.getElementById('stampsContainer');
    const showOnce = (() => {
      try { return sessionStorage.getItem('showStampsOnce'); } catch (e) { return null; }
    })();

    if (!stampsContainer) return;

    if (showOnce) {
      // If we just came from a "Get Stamp" redirect, display any stamps stored, then remove them
      countries.forEach(country => {
        const stampSrc = localStorage.getItem(`stamp-${country}`);
        if (stampSrc && !document.getElementById(`stamp-${country}`)) {
          const stampImg = document.createElement('img');
          stampImg.id = `stamp-${country}`;
          stampImg.src = stampSrc;
          stampImg.alt = `${country} stamp`;
          stampImg.style.position = 'absolute';
          stampImg.style.width = '25%';
          stampImg.style.height = 'auto';
          stampImg.style.top = stampPositions[country].top;
          stampImg.style.left = stampPositions[country].left;
          stampImg.style.transform = `rotate(${stampPositions[country].rotation})`;
          stampImg.style.filter = 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))';
          stampsContainer.appendChild(stampImg);
          // Remove the stored stamp so passport is cleared next time
          try { localStorage.removeItem(`stamp-${country}`); } catch (e) {}
        }
      });
      try { sessionStorage.removeItem('showStampsOnce'); } catch (e) {}
    } else {
      // Not a recent redirect â€” ensure passport is clear for all users
      countries.forEach(country => {
        // remove any stored stamps
        try { localStorage.removeItem(`stamp-${country}`); } catch (e) {}
        // remove any existing DOM stamps if present
        const el = document.getElementById(`stamp-${country}`);
        if (el && el.parentNode) el.parentNode.removeChild(el);
      });
    }
  });
</script>
</html>